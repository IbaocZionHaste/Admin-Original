<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>User Account Management</title>
  <!-- Include Boxicons CSS for icons -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  <style>
    body {
      background: var(--grey);
      overflow-x: hidden;
    }

    :root {
      --poppins: 'Poppins', sans-serif;
      --lato: 'Lato', sans-serif;
      --light: #F9F9F9;
      --blue: #3C91E6;
      --light-blue: #CFE8FF;
      --grey: #eee;
      --dark-grey: #AAAAAA;
      --dark: #342E37;
      --red: #DB504A;
      --yellow: #FFCE26;
      --light-yellow: #FFF2C6;
      --orange: #FD7238;
      --light-orange: #FFE0D3;
    }

    html {
      overflow-x: hidden;
    }





    .table-data {
      display: flex;
      flex-wrap: wrap;
      gap: 24px;
      margin-top: 24px;
      width: 100%;
      color: var(--dark);
    }

    .table-data>div {
      border-radius: 20px;
      background: var(--light);
      padding: 24px;
      overflow-x: auto;
    }

    .table-data .head {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 24px;
    }

    .table-data .head h3 {
      margin-right: auto;
      font-size: 24px;
      font-family: var(--poppins);
      font-weight: 600;
    }

    .table-data .head .bx {
      cursor: pointer;
    }

    .table-data .order {
      flex-grow: 1;
      flex-basis: 500px;
    }

    .table-data .order table {
      width: 100%;
      border-collapse: collapse;
    }

    .table-data .order table th {
      padding-bottom: 12px;
      font-size: 13px;
      font-family: var(--poppins);
      text-align: center;
      border-bottom: 2px solid var(--grey);
    }

    .table-data .order table td {
      padding: 16px 0;
      text-align: center;
    }

    .table-data .order table tbody tr:hover {
      background: var(--grey);
    }

    .head-title {
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
      font-family: var(--poppins);
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
      overflow: auto;
      padding: 20px;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      width: 100%;
      max-width: 500px;
      position: relative;
      max-height: 85vh;
      scrollbar-width: none;
      overflow-y: auto;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-content h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #444;
    }

    .modal-content .close {
      position: absolute;
      right: 15px;
      top: 15px;
      font-size: 22px;
      cursor: pointer;
      color: #888;
    }

    .modal-content .close:hover {
      color: #333;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      margin: 0 auto;
    }

    fieldset {
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 10px;
      margin-bottom: 15px;
    }

    fieldset legend {
      font-weight: bold;
      padding: 0 5px;
    }

    .permissions-list label {
      display: inline-block;
      margin-right: 10px;
      margin-bottom: 8px;
      background: #f0f0f0;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .permissions-list label:hover {
      background: #e0e0e0;
    }

    .permissions-list input[type="checkbox"] {
      margin-right: 5px;
    }

    .modal-content form button {
      display: block;
      width: 30%;
      padding: 10px;
      background: #007bff;
      border: none;
      color: #fff;
      border-radius: 50px;
      cursor: pointer;
      font-size: 16px;
      margin-left: auto;
    }

    .modal-content form button:hover {
      background: #0069d9;
    }

    #openModalBtn {
      padding: 10px 20px;
      border: none;
      border-radius: 50px;
      background-color: #3C91E6;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    #openModalBtn:hover {
      background-color: #2a78c5;
    }

    /* Style the permission details text inside the modal */
    #permissionModalText {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      color: #342E37;
      text-align: left;
      line-height: 1.6;
      padding: 15px;
      background: #F9F9F9;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin: 15px 0;
    }


    .details-icon {
      color: #ffa500;
      background-color: #fff7e6;
      font-size: 1.5rem;
      padding: 8px;
      border-radius: 50%;
      transition: transform 0.2s ease, background-color 0.2s ease;
      cursor: pointer;
    }

    .details-icon:hover {
      background-color: #ffa500;
      color: #fff;
      transform: scale(1.1);
    }


    .order table {
      table-layout: fixed;
      width: 100%;
    }

    .order table th,
    .order table td {
      padding: 16px;
      text-align: center;
      word-wrap: break-word;
    }

    /* Optionally, set specific widths for each column if needed */
    .order table th:nth-child(1),
    .order table td:nth-child(1) {
      width: 20%;
    }

    .order table th:nth-child(2),
    .order table td:nth-child(2) {
      width: 20%;
    }

    .order table th:nth-child(3),
    .order table td:nth-child(3) {
      width: 20%;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="head-title">
      <div class="left">
        <h1>Role and Permissions</h1>
      </div>
    </div>
    <div class="table-data">
      <div class="order">
        <div class="head">
          <h3>List of Users</h3>
          <button id="openModalBtn">Create User</button>
        </div>
        <table>
          <thead>
            <tr>
              <th>Username</th>
              <th>Role</th>
              <th>Permission Details</th>
            </tr>
          </thead>
          <tbody id="accommodation-list">
            <!-- User rows will be added here -->
          </tbody>
        </table>
      </div>
    </div>
    <!-- Create Account Modal -->
    <div class="modal" id="accountModal">
      <div class="modal-content">
        <span class="close" id="closeModalBtn">&times;</span>
        <h2>Create Account</h2>
        <form id="accountForm">
          <div class="form-group">
            <label for="userName">Name</label>
            <input type="text" id="userName" name="userName" placeholder="Enter name" required>
          </div>
          <div class="form-group">
            <label for="userPassword">Password</label>
            <input type="password" id="userPassword" name="userPassword" placeholder="Enter password" required>
          </div>
          <div class="form-group">
            <label for="userRole">Role</label>
            <select id="userRole" name="userRole" required>
              <option value="">Select Role</option>
              <option value="Manager">Manager</option>
              <option value="Staff">Staff</option>
            </select>
          </div>
          <fieldset>
            <legend>Permissions</legend>
            <div class="permissions-list">
              <label><input type="checkbox" name="permissions" value="Dashboard"> Dashboard</label>
              <label><input type="checkbox" name="permissions" value="Setup Amenities"> Setup Amenities</label>
              <label><input type="checkbox" name="permissions" value="Accommodation"> Accommodation</label>
              <label><input type="checkbox" name="permissions" value="Food/Beverage"> Food/Beverage</label>
              <label><input type="checkbox" name="permissions" value="Package"> Package</label>
              <label><input type="checkbox" name="permissions" value="Reports"> Reports</label>
              <label><input type="checkbox" name="permissions" value="Income Report"> Income Report</label>
              <label><input type="checkbox" name="permissions" value="Booking Report"> Booking Report</label>
              <label><input type="checkbox" name="permissions" value="Transaction"> Transaction</label>
              <label><input type="checkbox" name="permissions" value="Booking Transaction"> Booking Transaction</label>
              <label><input type="checkbox" name="permissions" value="Payment Transaction"> Payment Transaction</label>
              <label><input type="checkbox" name="permissions" value="User Account Manager"> User Account
                Manager</label>
            </div>
          </fieldset>
          <button type="submit">Create Account</button>
        </form>
      </div>
    </div>

    <!-- Permission Details Modal -->
    <div class="modal" id="permissionModal">
      <div class="modal-content">
        <span class="close" id="closePermissionModalBtn">&times;</span>
        <h2>Permission Details</h2>
        <p id="permissionModalText"></p>
      </div>
    </div>
    <script>
      // Modal handling for Create Account
      const openModalBtn = document.getElementById('openModalBtn');
      const accountModal = document.getElementById('accountModal');
      const closeModalBtn = document.getElementById('closeModalBtn');
      openModalBtn.addEventListener('click', () => {
        accountModal.classList.add('active');
      });
      closeModalBtn.addEventListener('click', () => {
        accountModal.classList.remove('active');
      });
      window.addEventListener('click', (e) => {
        if (e.target === accountModal) {
          accountModal.classList.remove('active');
        }
      });
      // Modal handling for Permission Details
      const permissionModal = document.getElementById('permissionModal');
      const closePermissionModalBtn = document.getElementById('closePermissionModalBtn');
      closePermissionModalBtn.addEventListener('click', () => {
        permissionModal.classList.remove('active');
      });
      window.addEventListener('click', (e) => {
        if (e.target === permissionModal) {
          permissionModal.classList.remove('active');
        }
      });
      // Handle account form submission and update table
      const accountForm = document.getElementById('accountForm');
      const accountsTableBody = document.querySelector('#accommodation-list');
      accountForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = document.getElementById('userName').value.trim();
        const role = document.getElementById('userRole').value;
        const selectedPermissions = Array.from(document.querySelectorAll('input[name="permissions"]:checked'))
          .map(input => input.value)
          .join(', ');
        // Create a new row with Username, Role, and a bx details icon for permissions.
        const row = document.createElement('tr');
        row.innerHTML = `<td>${name}</td>
                         <td>${role}</td>
                         <td><i class="bx bx-detail details-icon" style="cursor:pointer;"></i></td>`;
        // When the details icon is clicked, show the permission modal with the stored permissions.
        row.querySelector('.details-icon').addEventListener('click', () => {
          document.getElementById('permissionModalText').innerText = selectedPermissions || 'No permissions selected.';
          permissionModal.classList.add('active');
        });
        accountsTableBody.appendChild(row);
        accountForm.reset();
        accountModal.classList.remove('active');
        console.log("Permissions selected for", name, ":", selectedPermissions);
      });
    </script>
  </div>
</body>

</html>